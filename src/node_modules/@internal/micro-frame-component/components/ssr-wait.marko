<await(input.iter.next()) timeout=input.timeout>
  <@then|{ value, done }|>
    <if(done)>
      <if(input.loading)>
        <!-- Remove all of the <@loading> content after we've received all the data -->
        $ out.script(
          `((e,t,d)=>{t=document.getElementById(e);do{t.removeChild(d=t.firstChild.nextSibling)}while(d.data!==e)})(${JSON.stringify(input.id)});`,
        );
      </if>
    </if>
    <else>
      $!{value}
      <ssr-wait ...input/>
    </else>
  </@then>
  <@catch|err|>
    <if(input.catch)>
      <!-- Remove everything in the container and render our catch handler -->
      $ out.write(`<script>(function(e){if(e)e.textContent=""})(document.getElementById(${JSON.stringify(input.id)}))</script>`);
      <${input.catch}(err)/>
    </if>
    <else>
      $ throw err;
    </else>
  </@catch>
</await>
