import { getSource } from "../../../util/stream";
$ const streamSource = getSource(input.from, out);
$ const stream = streamSource.slot(input.slot);
$ let finishLoading;
$ const loadingPromise = (
  input.loading && new Promise((res) => (finishLoading = res))
);
<div
  id=component.id
  class=input.class
  style=input.style
  data-slot=input.slot
  data-from=input.from
>
  $ out.bf("@_", component, true);
  <if(stream)>
    <if(input.loading)>
      <await(loadingPromise)
        timeout=input.timeout
        placeholder=input.loading
        client-reorder
      />
    </if>
    <ssr-wait
      id=component.id
      iter=stream
      timeout=input.timeout
      clientReorder=input.clientReorder
      finishLoading=(() => finishLoading && finishLoading())
      loaded=false
      catch=input.catch
    />
  </if>
  $ out.ef();
</div>
